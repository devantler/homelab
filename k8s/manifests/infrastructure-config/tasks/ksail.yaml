apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: ksail-install
  namespace: tekton
spec:
  steps:
    - name: echo
      image: alpine
      script: |
        #!/bin/sh
        echo "âš™ï¸ Installing curl"
        apk add --no-cache curl

        echo "âš™ï¸ Installing KSail"
        curl -LOJ "https://getbin.io/devantler/ksail?os=darwin&arch=arm64"
        chmod +x ksail-darwin-arm64
        mv ksail-darwin-arm64 /usr/local/bin/ksail
        ksail version

        echo "ğŸš€ Provision cluster"
        ksail init test
        ksail up test

        echo "ğŸ”¥ Destroy cluster"
        ksail down test

